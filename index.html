<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="colores.css">
    <link rel="stylesheet" href="comentarios.css">
    <link rel="stylesheet" href="comentarios2.css">
    <title>Susurros desde la Ventana</title>

</head>

<body>
    <header>
        <div class="title-block">
            <h1>Susurros desde la Ventana</h1>
            <button id="themeToggle" onclick="toggleTheme()">Cambiar tema</button>
            <p>Textos escritos desde adentro, en d√≠as de lluvia y d√≠as de ruido.</p>
        </div>
        <div class="header-image">Imagen aqu√≠</div>
    </header>

    <nav>
        <a href="index.html">Inicio</a>
        <div class="dropdown">
            <a href="#" class="dropbtn">Textos</a>
            <div class="dropdown-content">
                <a href="ep1.html">Esperanza y Sentimiento</a>
               
            </div>
        </div>
        <div class="dropdown">
            <a href="#" class="dropbtn">Poemas</a>
            <div class="dropdown-content">
                <a href="poema1.html">Ella</a>
                 <a href="poema2.html">Luz que acompa√±a</a>
            </div>
        </div>
    </nav>

    <div class="content">
        <h2>Cuando el pecho se queda vac√≠o</h2>
        <p>Hay d√≠as en los que el pecho se queda vac√≠o y la casa suena distinto. No pasa siempre por algo grande: a
            veces las peleas de siempre, un mensaje que no lleg√≥, o el silencio entre dos personas, y de repente todo se
            desestabiliza.</p>
        <p>Hay una doble sensaci√≥n que me repite: por un lado la verg√ºenza de volver a caer; por otro, la extra√±a
            familiaridad de saber c√≥mo volver a levantarse. No es lo mismo que estar bien ‚Äîes saber que existen maneras
            de atenuar el ruido.</p>
        <p>Para m√≠, las peque√±as cosas importan m√°s que los grandes planes: una hora con la guitarra, cinco p√°ginas de
            un libro, salir a cambiar de aire aunque sea cinco minutos, ba√±arme y obligarme a cenar. Son rituales que
            parecen tontos hasta que empez√°s a sumarlos y descubr√≠s que hacen una red debajo tuyo.</p>
        <p>La terapia me ense√±√≥ esto: no exigirme perfecci√≥n, s√≠ observar patrones. Cuando siento ese hueco en el pecho,
            intento tres cosas sencillas: respirar contando hasta cuatro, escribir una p√°gina aunque sean frases torpes,
            y mandar un mensaje corto a alguien aunque no piense que me va a contestar. No es glamour, pero funciona a
            veces.</p>
        <p>Si est√°s pasando por algo parecido, no esperes a que todo cambie para cuidarte. Empez√° por una peque√±a cosa:
            caminar veinte minutos, poner una canci√≥n que te mueva, o escribir solo una frase sobre c√≥mo te sent√≠s. No
            es poco.</p>
        <p>Y si quer√©s, dej√° una nota abajo. No prometo soluciones, pero prometo que alguien ley√≥ lo que sentiste. A
            veces basta con eso, que te escuchen.</p>
    </div>

   <!-- CONTENEDOR DE COMENTARIOS -->
<div class="comments-container">
    <h3>Deja tu comentario</h3>

    <form id="commentForm">
        <input type="text" id="username" placeholder="Tu nombre o alias" required>
        <textarea id="comment" placeholder="Escribe tu comentario aqu√≠..." required></textarea>
        <button type="submit" id="submitComment">Enviar</button>
    </form>

    <h4>Comentarios</h4>
    <div id="commentsList"></div>
</div>


    <footer>
        Creado por IA - CR
    </footer>

    <script>
function toggleTheme() {
document.body.classList.toggle('light-mode');
}
</script>

<script type="module">

// Importar Firebase desde CDN (ESTO S√ç FUNCIONA EN VERCEL)
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, onSnapshot } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// Tu config exacta
const firebaseConfig = {
    apiKey: "AIzaSyCrcCEgRb2K17TQq2LoEVJhPayHLjF3S_k",
    authDomain: "susurros-desde-la-ventana.firebaseapp.com",
    projectId: "susurros-desde-la-ventana",
    storageBucket: "susurros-desde-la-ventana.firebasestorage.app",
    messagingSenderId: "56714635794",
    appId: "1:56714635794:web:474e3c63dfa5dfbc5b06cb",
    measurementId: "G-NLLJYW55ZR"
};

// Inicializar Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// üëá CORREGIDO: esta es tu colecci√≥n real
const commentsRef = collection(db, "ep1");

// FORMULARIO
const form = document.getElementById("commentForm");

form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const name = document.getElementById("username").value.trim();
    const comment = document.getElementById("comment").value.trim();

    if (!name || !comment) return alert("Completa todos los campos.");

    try {
        await addDoc(commentsRef, {
            name,
            comment,
            time: serverTimestamp()
        });

        form.reset();

    } catch (error) {
        console.error("Error guardando comentario: ", error);
    }
});

// LISTAR COMENTARIOS EN TIEMPO REAL
const commentsList = document.getElementById("commentsList");

const q = query(commentsRef, orderBy("time", "desc"));

onSnapshot(q, (snapshot) => {
    commentsList.innerHTML = "";

    snapshot.forEach((doc) => {
        const item = doc.data();
        commentsList.innerHTML += `
            <div class="comment-item">
                <strong>${item.name}</strong><br>
                <span>${item.comment}</span>
            </div>
        `;
    });
});

</script>






</body>

</html>